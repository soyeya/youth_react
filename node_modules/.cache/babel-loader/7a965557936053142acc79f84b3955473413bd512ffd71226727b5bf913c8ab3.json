{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import Page from'../../components/Page';import Title from'../../components/Title';import Navi from'../../components/Navi';import naviDB from'../../json/navi.json';import Formcontrol from'../../components/Formcontrol.jsx';import*as MyForm from'../../lib/MyForm.jsx';import*as MyLayout from'../../lib/MyLayout.jsx';import ErrorDialog from'../../components/ErrorDialog.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Join=()=>{const[join,setJoin]=useState();const[sucess,setSucess]=useState();const{startLoading,finishLoading}=MyLayout.useLoading();const{openDialog}=MyLayout.useDialog();const navigate=useNavigate();const validate=values=>{const errors={};const idRegExp=/^[a-z]+[a-z0-9]{5,19}$/g;const passwordRegExp=/^(?=.*\\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{8,16}$/;if(!idRegExp.test(values.join_id)){errors.join_id=\"아이디를 영문자 또는 숫자 6~20자로 입력해주세요\";}if(!passwordRegExp.test(values.join_password)){errors.join_password=\"비밀번호를 8 ~ 16자 영문, 숫자 조합해주세요\";}return errors;};const onClick=async e=>{if(!join)return{};else{const login_list={userId:[],userPassword:[]};const idRegExp=/^[a-z]+[a-z0-9]{5,19}$/g;const passwordRegExp=/^(?=.*\\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{8,16}$/;const value_id=e.parentElement.children.join_form.join_id.value;const value_password=e.parentElement.children.join_form.join_password.value;if(!idRegExp.test(value_id)||!passwordRegExp.test(value_password)){return navigate('/join'),alert(\"\\uC544\\uC774\\uB514\\uC640 \\uBE44\\uBC00\\uBC88\\uD638 \\uC870\\uAC74\\uC774 \\uB9DE\\uC9C0\\uC54A\\uC2B5\\uB2C8\\uB2E4\");}else{try{startLoading('회원가입중...');login_list.userId.push(value_id);login_list.userPassword.push(value_password);const res=await axios.post('http://localhost:3400/join',login_list);const data=res.data;setSucess(data);return finishLoading(),alert(\"\".concat(value_id,\" \\uD658\\uC601\\uD569\\uB2C8\\uB2E4.\")),navigate('/');}catch(err){finishLoading();openDialog(/*#__PURE__*/_jsx(ErrorDialog,{}));return;}}}};useEffect(()=>{setJoin(true);},[join,sucess]);return/*#__PURE__*/_jsx(Page,{header:/*#__PURE__*/_jsx(Title,{title:'회원가입'}),footer:/*#__PURE__*/_jsx(Navi,{data:naviDB.join}),children:join&&/*#__PURE__*/_jsx(\"div\",{className:\"join\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"joinBox\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC544\\uC774\\uB514 \\uBC0F \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC124\\uC815\\uD574\\uC8FC\\uC138\\uC694\"}),/*#__PURE__*/_jsxs(MyForm.Form,{id:\"join_form\",className:\"JoinForm\",initialValue:{join_id:\"\",join_password:\"\"},validate:validate// onSubmit={(e) => onClick(e.target.value)}\n,children:[/*#__PURE__*/_jsx(Formcontrol,{label:\"\\uC544\\uC774\\uB514\",htmlFor:\"join_id\",required:true,error:/*#__PURE__*/_jsx(MyForm.ErrorMessage,{name:\"join_id\"}),children:/*#__PURE__*/_jsx(MyForm.FormField,{type:\"text\",placeholder:\"\\uC544\\uC774\\uB514\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",name:\"join_id\"})}),/*#__PURE__*/_jsx(Formcontrol,{label:\"\\uBE44\\uBC00\\uBC88\\uD638\",required:true,htmlFor:\"join_password\",error:/*#__PURE__*/_jsx(MyForm.ErrorMessage,{name:\"join_password\"}),children:/*#__PURE__*/_jsx(MyForm.FormField,{type:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",name:\"join_password\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"submitBtn\",onClick:e=>{onClick(e.target);},children:\"\\uD68C\\uC6D0\\uAC00\\uC785\\uD558\\uAE30\"})]})})});};export default Join;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","Page","Title","Navi","naviDB","Formcontrol","MyForm","MyLayout","ErrorDialog","jsx","_jsx","jsxs","_jsxs","Join","join","setJoin","sucess","setSucess","startLoading","finishLoading","useLoading","openDialog","useDialog","navigate","validate","values","errors","idRegExp","passwordRegExp","test","join_id","join_password","onClick","e","login_list","userId","userPassword","value_id","parentElement","children","join_form","value","value_password","alert","push","res","post","data","concat","err","header","title","footer","className","Form","id","initialValue","label","htmlFor","required","error","ErrorMessage","name","FormField","type","placeholder","target"],"sources":["/Users/soye/Downloads/2024포트폴리오/youth/youth_front/src/pages/Join/Join.jsx"],"sourcesContent":["import React , { useState , useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Page from '../../components/Page';\nimport Title from '../../components/Title';\nimport Navi from '../../components/Navi';\nimport naviDB from '../../json/navi.json';\nimport Formcontrol from '../../components/Formcontrol.jsx';\nimport * as MyForm from  '../../lib/MyForm.jsx';\nimport * as MyLayout from '../../lib/MyLayout.jsx';\nimport ErrorDialog from '../../components/ErrorDialog.jsx';\n\nconst Join = () => {\n\n     const [ join , setJoin ] = useState();\n     const [ sucess , setSucess ] = useState();\n     const { startLoading , finishLoading } = MyLayout.useLoading();\n     const { openDialog } = MyLayout.useDialog();\n     const navigate = useNavigate();\n    \n     const validate = (values) => {\n       \n       const errors = {};\n       const idRegExp = /^[a-z]+[a-z0-9]{5,19}$/g;\n       const passwordRegExp = /^(?=.*\\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{8,16}$/;\n\n        if (!idRegExp.test(values.join_id)) {\n          errors.join_id = \"아이디를 영문자 또는 숫자 6~20자로 입력해주세요\";\n        }\n        if (!passwordRegExp.test(values.join_password)) {\n          errors.join_password = \"비밀번호를 8 ~ 16자 영문, 숫자 조합해주세요\";\n        }\n        return errors;\n\n      };\n\n      const onClick = async(e) => {\n\n       if(!join) return {};\n\n       else{\n\n        const login_list = { userId : [], userPassword : []};\n        const idRegExp = /^[a-z]+[a-z0-9]{5,19}$/g;\n        const passwordRegExp = /^(?=.*\\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{8,16}$/;\n        const value_id = e.parentElement.children.join_form.join_id.value;\n        const value_password = e.parentElement.children.join_form.join_password.value;\n\n        if(!idRegExp.test(value_id) || !passwordRegExp.test(value_password)){\n          \n          return navigate('/join'), alert(`아이디와 비밀번호 조건이 맞지않습니다`);\n        \n        }else{\n\n         try{\n            startLoading('회원가입중...');\n            login_list.userId.push(value_id);\n            login_list.userPassword.push(value_password);\n            const res = await axios.post('http://localhost:3400/join' , login_list);\n            const data = res.data;\n            setSucess(data);\n            return finishLoading(), alert(`${value_id} 환영합니다.`), navigate('/');\n\n            }catch(err){\n              finishLoading();\n              openDialog(<ErrorDialog />);\n              return;\n            }\n          }\n\n        } \n     }\n\n      useEffect(() => {\n\n         setJoin(true)\n\n      },[join, sucess])\n\n     return(\n      <Page\n       header={<Title title={'회원가입'}/>}\n       footer={<Navi data={naviDB.join}/>}\n      >\n        {join && (\n        <div className=\"join\">\n           <div className=\"joinBox\">\n             <h3>아이디 및 비밀번호를 설정해주세요</h3>\n          <MyForm.Form\n            id=\"join_form\"\n            className=\"JoinForm\"\n            initialValue={{\n                join_id : \"\",\n                join_password : \"\"\n            }}\n            validate={validate}\n            // onSubmit={(e) => onClick(e.target.value)}\n\n          >\n            <Formcontrol\n            label='아이디'\n            htmlFor='join_id'\n            required\n            error={<MyForm.ErrorMessage name='join_id'/>}\n            >\n            <MyForm.FormField \n             type=\"text\"\n             placeholder=\"아이디를 입력해주세요\"\n             name=\"join_id\"\n            />\n            </Formcontrol>\n            <Formcontrol\n             label='비밀번호'\n             required\n             htmlFor='join_password'\n             error={<MyForm.ErrorMessage name='join_password' />}\n            >\n            <MyForm.FormField \n             type=\"password\"\n             placeholder=\"비밀번호를 입력해주세요\"\n             name=\"join_password\"\n            />\n            </Formcontrol>\n          </MyForm.Form>\n            <button className='submitBtn' onClick={(e) => {onClick(e.target)}}>회원가입하기</button>\n            </div>\n        </div> )}\n      </Page>\n     )\n\n}\n\nexport default Join;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}