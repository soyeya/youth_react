{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import Page from'../components/Page';import Title from'../components/Title';import Navi from'../components/Navi';import NaviDB from'../json/navi.json';import Category from'./Category';import Board from'./Board';import*as MyLayout from'../lib/MyLayout';import ErrorDialog from'../components/ErrorDialog';import loadingImg from'../assets/img/toyouth.png';import OpenPage from'../components/OpenPage';import logo from'../assets/img/toyouth.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[upDateLogin,setUpdateLogin]=useState(false);const[dataContent,setDataContent]=useState();const[dataList,setDataList]=useState();const{startLoading,finishLoading}=MyLayout.useLoading();const{openDialog,closeDialog}=MyLayout.useDialog();const changeCondition=async()=>{try{const res=await axios.get('http://localhost:3400/LoginList');const data=res.data;if(data.length<=0){return setUpdateLogin(false);}else{return setUpdateLogin(true),setDataContent([data[0].userId,data[0].userPassword]);}}catch(err){openDialog(/*#__PURE__*/_jsx(ErrorDialog,{}));return;}};const arry01=[];const news=async()=>{try{startLoading('NEWS 불러오는중...');const res=await axios.get('http://localhost:3400/newsApi');const res_data=res.data.youthPolicyList.youthPolicy;let section_Title=\"\";if(res_data.length>0){for(let i in res_data){const title=res_data[i].polyBizSjnm._cdata;const administration=res_data[i].mngtMson._cdata;const section=res_data[i].polyRlmCd._cdata;if(section==\"023010\"){section_Title=\"job\";}else if(section==\"023020\"){section_Title=\"residence\";}else if(section==\"023040\"){section_Title=\"welfare\";}else if(section==\"023030\"){section_Title=\"education\";}else{}arry01.push({title,administration,section_Title});}return finishLoading(),setDataList(arry01);}}catch(err){finishLoading();setDataList(arry01);return;}};const onClick=async()=>{if(!upDateLogin){return;}else{startLoading('로그아웃중...');try{const res=await axios.post('http://localhost:3400/Logout',dataContent);const data=res.data;return finishLoading(),setUpdateLogin(false);}catch(err){finishLoading();console.log('err');}finishLoading();}};useEffect(()=>{const openEvt=()=>{window.addEventListener(\"load\",()=>{openDialog(/*#__PURE__*/_jsx(OpenPage,{children:/*#__PURE__*/_jsx(\"img\",{src:loadingImg})}));setTimeout(()=>{closeDialog();},3000);});};openEvt();changeCondition();news();},[upDateLogin]);return/*#__PURE__*/_jsxs(Page,{header:/*#__PURE__*/_jsx(Title,{title:/*#__PURE__*/_jsx(\"img\",{src:logo}),color:true}),footer:upDateLogin?/*#__PURE__*/_jsx(Navi,{loginUpload:true,color:true,onClick:onClick}):/*#__PURE__*/_jsx(Navi,{data:NaviDB.home,color:true}),children:[/*#__PURE__*/_jsx(Category,{}),/*#__PURE__*/_jsx(Board,{boardList:dataList})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","axios","Page","Title","Navi","NaviDB","Category","Board","MyLayout","ErrorDialog","loadingImg","OpenPage","logo","jsx","_jsx","jsxs","_jsxs","Home","upDateLogin","setUpdateLogin","dataContent","setDataContent","dataList","setDataList","startLoading","finishLoading","useLoading","openDialog","closeDialog","useDialog","changeCondition","res","get","data","length","userId","userPassword","err","arry01","news","res_data","youthPolicyList","youthPolicy","section_Title","i","title","polyBizSjnm","_cdata","administration","mngtMson","section","polyRlmCd","push","onClick","post","console","log","openEvt","window","addEventListener","children","src","setTimeout","header","color","footer","loginUpload","home","boardList"],"sources":["/Users/soye/Downloads/2024포트폴리오/youth/youth_front/src/pages/Home.jsx"],"sourcesContent":["import React , { useState, useEffect} from 'react';\nimport axios from 'axios';\nimport Page from '../components/Page';\nimport Title from '../components/Title';\nimport Navi from '../components/Navi';\nimport NaviDB from '../json/navi.json';\nimport Category from './Category';\nimport Board from './Board';\nimport * as MyLayout from '../lib/MyLayout';\nimport ErrorDialog from '../components/ErrorDialog';\nimport loadingImg from '../assets/img/toyouth.png';\nimport OpenPage from '../components/OpenPage';\nimport logo from '../assets/img/toyouth.png';\n\n\nconst Home = () => {\n  const [ upDateLogin , setUpdateLogin] = useState(false);\n  const [ dataContent, setDataContent ] = useState();\n  const [ dataList, setDataList ] = useState();\n  const { startLoading , finishLoading } = MyLayout.useLoading();\n  const { openDialog , closeDialog } = MyLayout.useDialog();\n  \n  const changeCondition = async() => {\n\n     try{\n        const res = await axios.get('http://localhost:3400/LoginList');\n        const data = res.data;\n\n        if(data.length <= 0){\n          return setUpdateLogin(false);\n\n        }else{\n          return setUpdateLogin(true), setDataContent([data[0].userId, data[0].userPassword]);\n        }\n\n    } catch(err){\n      openDialog(<ErrorDialog />);\n      return;\n    }\n     \n  };\n\n  const arry01 = [];\n  const news = async() => {\n\n      try{\n          startLoading('NEWS 불러오는중...');\n          const res = await axios.get('http://localhost:3400/newsApi');\n          const res_data = res.data.youthPolicyList.youthPolicy;\n          let section_Title = \"\";\n          \n          if(res_data.length > 0){\n             for(let i in res_data){\n                 const title = res_data[i].polyBizSjnm._cdata;\n                 const administration = res_data[i].mngtMson._cdata;\n                 const section = res_data[i].polyRlmCd._cdata;\n                 if(section == \"023010\") { section_Title = \"job\"}\n                 else if(section == \"023020\") { section_Title = \"residence\"}\n                 else if(section == \"023040\") { section_Title = \"welfare\"}\n                 else if(section == \"023030\") { section_Title = \"education\"}\n                 else{}\n                 arry01.push({ title, administration, section_Title});\n             }\n             return  finishLoading(), setDataList(arry01);\n         }\n\n      }catch(err){\n\n        finishLoading(); \n        setDataList(arry01);\n        return;\n      }\n      \n  };\n\n  const onClick = async() => {\n\n    if(!upDateLogin){\n      return\n    }else{\n        startLoading('로그아웃중...');\n        try{\n          const res = await axios.post('http://localhost:3400/Logout' , dataContent);\n          const data = res.data;\n          return  finishLoading(), setUpdateLogin(false);\n        }\n        catch(err){\n          finishLoading();\n          console.log('err');\n        }\n        finishLoading();\n    \n    }\n  };\n\n  useEffect(() => {\n      \n    const openEvt = () => {\n      window.addEventListener(\"load\" , () => {\n        openDialog(<OpenPage><img src={loadingImg} /></OpenPage>)\n        setTimeout(() => {\n          closeDialog();\n       },3000);\n      })\n    };\n     openEvt();\n     changeCondition();\n     news();\n\n\n\n  },[upDateLogin])\n\n     return(\n      \n        <Page \n        header={<Title title={<img src={logo}/>} color/>}\n        footer={\n          upDateLogin ? (<Navi loginUpload color onClick={onClick}/>) : (<Navi data={NaviDB.home} color></Navi>)}>\n        <Category />\n        <Board boardList={dataList}/>\n        </Page>\n     )\n   }\n\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}