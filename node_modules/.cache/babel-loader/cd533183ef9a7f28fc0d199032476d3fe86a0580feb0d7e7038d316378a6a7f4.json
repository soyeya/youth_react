{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import Page from'../../components/Page';import Title from'../../components/Title';import Navi from'../../components/Navi';import naviDB from'../../json/navi.json';import Formcontrol from'../../components/Formcontrol.jsx';import*as MyForm from'../../lib/MyForm.jsx';import*as MyLayout from'../../lib/MyLayout.jsx';import ErrorDialog from'../../components/ErrorDialog.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[login,setLogin]=useState();const navigate=useNavigate();const{startLoading,finishLoading}=MyLayout.useLoading();const{openDialog}=MyLayout.useDialog();const validate=values=>{const errors={};const idRegExp=/^[a-z]+[a-z0-9]{5,19}$/g;const passwordRegExp=/^(?=.*\\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{8,16}$/;if(!values.login_id||!idRegExp.test(values.login_id)){errors.login_id=\"아이디를 입력해주세요\";}if(!values.login_password||!passwordRegExp.test(values.login_password)){errors.login_password=\"비밀번호를 입력해주세요\";}return errors;};const onClick=async e=>{const login_list=[];if(!login)return;else{const idRegExp=/^[a-z]+[a-z0-9]{5,19}$/g;const passwordRegExp=/^(?=.*\\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{8,16}$/;const value_id=e.parentElement.children.login_form.login_id.value;const value_password=e.parentElement.children.login_form.login_password.value;if(!idRegExp.test(value_id)||!passwordRegExp.test(value_password)){return alert(\"\\uC544\\uC774\\uB514\\uC640 \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uB2E4\\uC2DC \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\");}else{try{startLoading('로그인 시도중...');login_list.push({userId:value_id,userPassword:value_password});const res=await axios.post('http://localhost:3400/login',[login_list[0].userId,login_list[0].userPassword]);const data=res.data;if(data<=0){const Login_data=[];Login_data.push({Id:data.userId,Password:data.userPassword});const id_result=Login_data[0].Id.match(login_list[0].userId)==Login_data[0].Id;const password_result=Login_data[0].Password.match(login_list[0].userPassword)==Login_data[0].Password;if(id_result&&password_result){return finishLoading(),navigate(\"/\");}}if(data.length>0){for(let i in data){const Login_data=[];Login_data.push({Id:data[i].userId,Password:data[i].userPassword});const id_result=Login_data[0].Id.match(login_list[0].userId)==Login_data[0].Id;const password_result=Login_data[0].Password.match(login_list[0].userPassword)==Login_data[0].Password;if(id_result&&password_result){return finishLoading(),navigate(\"/\");}}return finishLoading(),alert('아이디와 비밀번호가 없습니다');}}catch(err){finishLoading();openDialog(/*#__PURE__*/_jsx(ErrorDialog,{}));return;}finishLoading();}}};useEffect(()=>{setLogin(true);},[]);return/*#__PURE__*/_jsx(Page,{header:/*#__PURE__*/_jsx(Title,{title:'로그인'}),footer:/*#__PURE__*/_jsx(Navi,{data:naviDB.join}),children:login&&/*#__PURE__*/_jsx(\"div\",{className:\"join login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"joinBox\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC544\\uC774\\uB514 \\uBC0F \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\"}),/*#__PURE__*/_jsxs(MyForm.Form,{id:\"login_form\",className:\"LoginForm\",initialValue:{login_id:\"\",login_password:\"\"},validate:validate// onSubmit={onClick}\n,children:[/*#__PURE__*/_jsx(Formcontrol,{label:'아이디',htmlFor:\"login_id\",required:true,error:/*#__PURE__*/_jsx(MyForm.ErrorMessage,{name:\"login_id\"}),children:/*#__PURE__*/_jsx(MyForm.FormField,{type:\"text\",placeholder:\"\\uC544\\uC774\\uB514\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",name:\"login_id\"})}),/*#__PURE__*/_jsx(Formcontrol,{label:'비밀번호',required:true,htmlFor:\"login_password\",error:/*#__PURE__*/_jsx(MyForm.ErrorMessage,{name:\"login_password\"}),children:/*#__PURE__*/_jsx(MyForm.FormField,{type:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",name:\"login_password\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"submitBtn\",onClick:e=>onClick(e.target),children:\"\\uB85C\\uADF8\\uC778\"})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","Page","Title","Navi","naviDB","Formcontrol","MyForm","MyLayout","ErrorDialog","jsx","_jsx","jsxs","_jsxs","Login","login","setLogin","navigate","startLoading","finishLoading","useLoading","openDialog","useDialog","validate","values","errors","idRegExp","passwordRegExp","login_id","test","login_password","onClick","e","login_list","value_id","parentElement","children","login_form","value","value_password","alert","push","userId","userPassword","res","post","data","Login_data","Id","Password","id_result","match","password_result","length","i","err","header","title","footer","join","className","Form","id","initialValue","label","htmlFor","required","error","ErrorMessage","name","FormField","type","placeholder","target"],"sources":["/Users/soye/Downloads/2024포트폴리오/youth/youth_front/src/pages/Join/Login.jsx"],"sourcesContent":["import React , { useState , useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Page from '../../components/Page';\nimport Title from '../../components/Title';\nimport Navi from '../../components/Navi';\nimport naviDB from '../../json/navi.json';\nimport Formcontrol from '../../components/Formcontrol.jsx';\nimport * as MyForm from  '../../lib/MyForm.jsx';\nimport * as MyLayout from '../../lib/MyLayout.jsx';\nimport ErrorDialog from '../../components/ErrorDialog.jsx';\n\n\nconst Login = () => {\n\n     const [ login , setLogin ] = useState();\n     const navigate = useNavigate();\n     const { startLoading , finishLoading } = MyLayout.useLoading();\n     const { openDialog } = MyLayout.useDialog();\n\n     const validate = (values) => {\n       \n      const errors = {};\n      const idRegExp = /^[a-z]+[a-z0-9]{5,19}$/g;\n      const passwordRegExp = /^(?=.*\\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{8,16}$/;\n\n       if (!values.login_id || !idRegExp.test(values.login_id)) {\n         errors.login_id = \"아이디를 입력해주세요\";\n       }\n       if (!values.login_password || !passwordRegExp.test(values.login_password)) {\n         errors.login_password = \"비밀번호를 입력해주세요\";\n       }\n       return errors;\n\n     };\n\n\n      const onClick = async(e) => {\n\n       const login_list = [];\n\n        if(!login) return;\n          else{\n          const idRegExp = /^[a-z]+[a-z0-9]{5,19}$/g;\n          const passwordRegExp = /^(?=.*\\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{8,16}$/;\n          const value_id = e.parentElement.children.login_form.login_id.value;\n          const value_password = e.parentElement.children.login_form.login_password.value;\n\n          if(!idRegExp.test(value_id) || !passwordRegExp.test(value_password)){\n            \n            return alert(`아이디와 비밀번호를 다시 입력해주세요`);\n          \n          }else{\n\n        try{\n            startLoading('로그인 시도중...');\n            login_list.push({ userId : value_id , userPassword : value_password});\n            const res = await axios.post('http://localhost:3400/login' , [login_list[0].userId, login_list[0].userPassword]);\n            const data = res.data;\n\n            if(data <= 0){\n              \n              const Login_data = [];\n              Login_data.push({ Id : data.userId, Password : data.userPassword });\n              const id_result = Login_data[0].Id.match(login_list[0].userId) == Login_data[0].Id;\n              const password_result = Login_data[0].Password.match(login_list[0].userPassword) == Login_data[0].Password;\n\n            if(id_result && password_result){\n                return finishLoading(), navigate(`/`);\n                 \n            }\n            }\n\n            if(data.length > 0){\n\n              for(let i in data){\n\n                const Login_data = [];\n                Login_data.push({ Id : data[i].userId, Password : data[i].userPassword });\n                const id_result = Login_data[0].Id.match(login_list[0].userId) == Login_data[0].Id;\n                const password_result = Login_data[0].Password.match(login_list[0].userPassword) == Login_data[0].Password;\n\n                if(id_result && password_result){\n                  return finishLoading(), navigate(`/`);\n                }\n              \n              }\n\n              return finishLoading(), alert('아이디와 비밀번호가 없습니다');\n            \n             }\n\n            }catch(err){\n              finishLoading();\n              openDialog(<ErrorDialog />);\n              return;\n\n            \n            }\n            finishLoading();\n          }\n\n          }\n      \n      }\n    \n\n      useEffect(() => {\n\n         setLogin(true);\n\n      },[])\n\n     return(\n      <Page\n      header={<Title title={'로그인'}/>}\n      footer={<Navi data={naviDB.join}/>}>\n        { login && (\n        <div className=\"join login\">\n           <div className=\"joinBox\">\n             <h3>아이디 및 비밀번호를 입력해주세요</h3>\n          <MyForm.Form\n            id=\"login_form\"\n            className=\"LoginForm\"\n            initialValue={{\n                login_id : \"\",\n                login_password : \"\"\n            }}\n            validate={validate}\n            // onSubmit={onClick}\n\n          >\n            <Formcontrol\n            label={'아이디'}\n            htmlFor='login_id'\n            required\n            error={<MyForm.ErrorMessage name='login_id'/>}\n            >\n            <MyForm.FormField \n             type=\"text\"\n             placeholder=\"아이디를 입력해주세요\"\n             name=\"login_id\"\n            />\n            </Formcontrol>\n            <Formcontrol\n             label={'비밀번호'}\n             required\n             htmlFor='login_password'\n             error={<MyForm.ErrorMessage name='login_password' />}\n            >\n            <MyForm.FormField \n             type=\"password\"\n             placeholder=\"비밀번호를 입력해주세요\"\n             name=\"login_password\"\n            />\n            </Formcontrol>\n          </MyForm.Form>\n            <button className='submitBtn' onClick={(e) => onClick(e.target)}>로그인</button>\n            </div>\n        </div> )}\n        </Page>\n     )\n\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}